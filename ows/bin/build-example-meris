#! /bin/sh
echo ":: trax owc MERIS example ::" >&2
echo "        :: owc -> wms  ::" >&2

PID=$$
file="../examples/meris_borders_users.atom"
bbox="-2,45,8,55"
title="Satellite Image and Countries borders over France and England and the list of OGC users"
id="https://github.com/Terradue/trax/tree/master/owc/bin/$file/"
subtitle="Two WMS layers from different servers giving an operational setting"

./ows2owc -u "http://ows.genesi-dec.eu/geoserver/385d7d71-650a-414b-b8c7-739e2c0b5e76/wms?service=WMS&version=1.1.0&request=GetCapabilities" -l "385d7d71-650a-414b-b8c7-739e2c0b5e76:MER_RR__2PRLRA20120406_102429_000026213113_00238_52838_0211.N1.tif" -b "-2,45,8,55" -m "fragment"> ../examples/tmp1.$PID
./ows2owc -u "http://nsidc.org/cgi-bin/atlas_north?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities" -l "country_borders"  -b "$bbox" -m "fragment" > ../examples/tmp2.$PID
./ows2owc -u "http://meet.opengeospatial.org:8080/geoserver/ows?service=WFS&request=GetCapabilities"  -l "topp:member_map" -b "$bbox" -m "fragment" > ../examples/tmp3.$PID

./build-head "$title" "$id" "$subtitle" > $file

echo "<entry>" >> $file
tail -n +3 ../examples/tmp1.$PID >> $file
echo "<entry>" >> $file
tail -n +3 ../examples/tmp2.$PID >> $file
echo "<entry>" >> $file
tail -n +3 ../examples/tmp3.$PID >> $file
echo "</feed>" >> $file

rm ../examples/tmp1.$PID
rm ../examples/tmp2.$PID
rm ../examples/tmp3.$PID

echo ":: trax owc examples completed ::"  >&2
